{% extends 'base.html' %}

{% block content %}
<form action="" method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Update</button>
</form>
<form action="{% url 'account:delete_user' %}" method="post" id="delete-account-form">
  {% csrf_token %}
  <button type="submit" style="background-color: red;">Delete Account</button>
</form>
<script>
  const formDeleteAccount = document.getElementById('delete-account-form');
  console.log(formDeleteAccount)
  formDeleteAccount.addEventListener('submit', e => {
    e.preventDefault();
    const deleteAccount = confirm('Are you sure you want to delete your account?');
    return deleteAccount && formDeleteAccount.submit()
  });
</script>
{% endblock %}
